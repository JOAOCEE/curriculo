<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CurrículoFácil - Editor de Currículos</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- HTMX para interações rápidas -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <!-- html2pdf.js para exportação de PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        .sidebar {
            height: calc(100vh - 64px);
        }
        .editor-gradient {
            background: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%);
        }
        .form-section {
            transition: all 0.3s ease;
        }
        .form-section:hover {
            background-color: #F9FAFB;
        }
        .preview-container {
            height: calc(100vh - 64px);
            overflow-y: auto;
        }
        /* Fallback para imagens */
        .image-fallback {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #EEF2FF;
            color: #4F46E5;
            font-weight: bold;
            text-align: center;
            padding: 2rem;
        }
        /* Preload de imagens importantes */
        body::after {
            position: absolute;
            width: 0;
            height: 0;
            overflow: hidden;
            z-index: -1;
            content: url('images/backgrounds/bg-pattern.jpg');
        }
    </style>
</head>
<body class="font-sans antialiased text-gray-800">
    <!-- Navbar -->
    <nav class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex">
                    <div class="flex-shrink-0 flex items-center">
                        <a href="index.html" class="text-indigo-600 font-bold text-2xl">CurrículoFácil</a>
                    </div>
                </div>
                <div class="flex items-center">
                    <button id="theme-toggle" class="mr-4 text-gray-500 hover:text-indigo-600">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button id="save-btn" onclick="saveResume()" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700">
                        <i class="fas fa-save mr-2"></i> Salvar
                    </button>
                    <button id="export-btn" onclick="exportToPDF()" class="ml-3 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-600 bg-white hover:bg-gray-50 border-indigo-600">
                        <i class="fas fa-file-export mr-2"></i> Exportar PDF
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="flex">
        <!-- Sidebar -->
        <div class="w-64 bg-gray-50 sidebar overflow-y-auto">
            <div class="p-4">
                <h2 class="text-lg font-medium text-gray-900">Seções do Currículo</h2>
                <ul class="mt-4 space-y-2">
                    <li>
                        <a href="#info-pessoal" class="flex items-center px-3 py-2 text-sm font-medium text-indigo-600 bg-indigo-50 rounded-md">
                            <i class="fas fa-user mr-3"></i>
                            Informações Pessoais
                        </a>
                    </li>
                    <li>
                        <a href="#resumo" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-md">
                            <i class="fas fa-file-alt mr-3"></i>
                            Resumo Profissional
                        </a>
                    </li>
                    <li>
                        <a href="#experiencia" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-md">
                            <i class="fas fa-briefcase mr-3"></i>
                            Experiência Profissional
                        </a>
                    </li>
                    <li>
                        <a href="#formacao" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-md">
                            <i class="fas fa-graduation-cap mr-3"></i>
                            Formação Acadêmica
                        </a>
                    </li>
                    <li>
                        <a href="#habilidades" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-md">
                            <i class="fas fa-tools mr-3"></i>
                            Habilidades
                        </a>
                    </li>
                    <li>
                        <a href="#idiomas" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-md">
                            <i class="fas fa-language mr-3"></i>
                            Idiomas
                        </a>
                    </li>
                    <li>
                        <a href="#cursos" class="flex items-center px-3 py-2 text-sm font-medium text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-md">
                            <i class="fas fa-certificate mr-3"></i>
                            Cursos e Certificações
                        </a>
                    </li>
                </ul>
            </div>

            <div class="p-4 border-t border-gray-200">
                <h2 class="text-lg font-medium text-gray-900">Modelos</h2>
                <div id="templates-container" class="grid grid-cols-2 gap-2">
                    <!-- Templates serão carregados dinamicamente -->
                    <div class="model-option cursor-pointer border-2 border-indigo-600 rounded-md overflow-hidden"
                         hx-get="/api/templates/classic"
                         hx-target="#template-preview"
                         hx-trigger="click"
                         hx-indicator="#loading-template">
                        <img src="images/templates/template_classico.jpeg" alt="Modelo Clássico" class="w-full h-24 object-cover"
                             onerror="this.onerror=null; this.parentElement.innerHTML='<div class=\'image-fallback h-24\'>Modelo<br>Clássico</div>';">
                        <div class="p-1 text-xs text-center bg-gray-50">Gratuito</div>
                    </div>
                    
                    <div class="model-option cursor-pointer border-2 border-transparent hover:border-indigo-600 rounded-md overflow-hidden relative"
                         hx-get="/api/templates/modern"
                         hx-target="#template-preview"
                         hx-trigger="click"
                         hx-indicator="#loading-template">
                        <img src="images/templates/template_moderno.jpeg" alt="Modelo Moderno" class="w-full h-24 object-cover"
                             onerror="this.onerror=null; this.parentElement.innerHTML='<div class=\'image-fallback h-24\'>Modelo<br>Moderno</div>';">
                        <div class="p-1 text-xs text-center bg-yellow-100 text-yellow-800">Premium</div>
                        <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity">
                            <i class="fas fa-lock text-white text-lg"></i>
                        </div>
                    </div>
                    
                    <div class="model-option cursor-pointer border-2 border-transparent hover:border-indigo-600 rounded-md overflow-hidden relative"
                         hx-get="/api/templates/executive"
                         hx-target="#template-preview"
                         hx-trigger="click"
                         hx-indicator="#loading-template">
                        <img src="images/templates/template_executivo.jpeg" alt="Modelo Executivo" class="w-full h-24 object-cover"
                             onerror="this.onerror=null; this.parentElement.innerHTML='<div class=\'image-fallback h-24\'>Modelo<br>Executivo</div>';">
                        <div class="p-1 text-xs text-center bg-yellow-100 text-yellow-800">Premium</div>
                        <div class="absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity">
                            <i class="fas fa-lock text-white text-lg"></i>
                        </div>
                    </div>
                    
                    <button class="model-option cursor-pointer border-2 border-dashed border-gray-300 hover:border-indigo-600 rounded-md overflow-hidden h-24 flex flex-col items-center justify-center text-gray-500 hover:text-indigo-600"
                            hx-get="/api/premium-features"
                            hx-target="#premium-modal"
                            hx-trigger="click">
                        <i class="fas fa-plus text-lg mb-1"></i>
                        <span class="text-xs">Ver Mais</span>
                    </button>
                </div>
                
                <!-- Loading indicator -->
                <div id="loading-template" class="htmx-indicator mt-2 text-center">
                    <div class="inline-flex items-center">
                        <i class="fas fa-spinner fa-spin mr-2"></i>
                        <span class="text-sm text-gray-600">Carregando template...</span>
                    </div>
                </div>
                
                <!-- Template preview area -->
                <div id="template-preview" class="mt-4 hidden">
                    <!-- Preview será carregado aqui -->
                </div>
            </div>

            <div class="p-4 border-t border-gray-200">
                <h2 class="text-lg font-medium text-gray-900">Análise ATS</h2>
                <div class="mt-4">
                    <div class="bg-white rounded-lg shadow-sm p-4">
                        <div class="flex items-center justify-between">
                            <h3 class="text-base font-medium text-gray-900">Pontuação Geral</h3>
                            <span class="text-lg font-bold text-green-600">85%</span>
                        </div>
                        <div class="mt-2 w-full bg-gray-200 rounded-full h-2.5">
                            <div class="bg-green-600 h-2.5 rounded-full" style="width: 85%"></div>
                        </div>
                        <ul class="mt-4 space-y-2 text-sm">
                            <li class="flex items-center justify-between">
                                <span class="text-gray-600">Palavras-chave</span>
                                <span class="text-green-600 font-medium">Bom</span>
                            </li>
                            <li class="flex items-center justify-between">
                                <span class="text-gray-600">Formato</span>
                                <span class="text-green-600 font-medium">Excelente</span>
                            </li>
                            <li class="flex items-center justify-between">
                                <span class="text-gray-600">Conteúdo</span>
                                <span class="text-yellow-600 font-medium">Médio</span>
                            </li>
                            <li class="flex items-center justify-between">
                                <span class="text-gray-600">Experiência</span>
                                <span class="text-green-600 font-medium">Bom</span>
                            </li>
                        </ul>
                        <div class="mt-4">
                            <a href="#" class="text-sm text-indigo-600 hover:text-indigo-800">Ver análise detalhada</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex">
            <!-- Form -->
            <div class="w-1/2 p-6 overflow-y-auto">
                <div id="info-pessoal" class="form-section bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h2 class="text-xl font-medium text-gray-900 mb-4">Informações Pessoais</h2>
                    <div class="grid grid-cols-1 gap-4">
                        <div>
                            <label for="nome" class="block text-sm font-medium text-gray-700">Nome Completo</label>
                            <input type="text" id="nome" name="nome" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Ex: João Silva">
                        </div>
                        <div>
                            <label for="cargo" class="block text-sm font-medium text-gray-700">Cargo Pretendido</label>
                            <input type="text" id="cargo" name="cargo" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Ex: Desenvolvedor Full Stack">
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700">E-mail</label>
                                <input type="email" id="email" name="email" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Ex: joao@email.com">
                            </div>
                            <div>
                                <label for="telefone" class="block text-sm font-medium text-gray-700">Telefone</label>
                                <input type="tel" id="telefone" name="telefone" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Ex: (11) 98765-4321">
                            </div>
                        </div>
                        <div>
                            <label for="localizacao" class="block text-sm font-medium text-gray-700">Localização</label>
                            <input type="text" id="localizacao" name="localizacao" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Ex: São Paulo, SP">
                        </div>
                        <div>
                            <label for="linkedin" class="block text-sm font-medium text-gray-700">LinkedIn</label>
                            <input type="url" id="linkedin" name="linkedin" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Ex: linkedin.com/in/joaosilva">
                        </div>
                    </div>
                </div>

                <div id="resumo" class="form-section bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h2 class="text-xl font-medium text-gray-900 mb-4">Resumo Profissional</h2>
                    <div>
                        <label for="resumo-text" class="block text-sm font-medium text-gray-700">Resumo</label>
                        <textarea id="resumo-text" name="resumo-text" rows="4" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Descreva brevemente sua experiência, habilidades e objetivos profissionais..."></textarea>
                        <div class="mt-2 flex justify-between items-center">
                            <button class="text-sm text-indigo-600 hover:text-indigo-800">
                                <i class="fas fa-magic mr-1"></i> Gerar com IA
                            </button>
                            <span class="text-xs text-gray-500">Recomendado: 3-5 frases</span>
                        </div>
                    </div>
                </div>

                <div id="experiencia" class="form-section bg-white rounded-lg shadow-sm p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-medium text-gray-900">Experiência Profissional</h2>
                        <button class="text-sm text-indigo-600 hover:text-indigo-800">
                            <i class="fas fa-plus mr-1"></i> Adicionar
                        </button>
                    </div>
                    <div class="border border-gray-200 rounded-md p-4 mb-4">
                        <div class="grid grid-cols-1 gap-4">
                            <div>
                                <label for="cargo-exp" class="block text-sm font-medium text-gray-700">Cargo</label>
                                <input type="text" id="cargo-exp" name="cargo-exp" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Ex: Desenvolvedor Front-end">
                            </div>
                            <div>
                                <label for="empresa" class="block text-sm font-medium text-gray-700">Empresa</label>
                                <input type="text" id="empresa" name="empresa" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Ex: Empresa XYZ">
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label for="data-inicio" class="block text-sm font-medium text-gray-700">Data de Início</label>
                                    <input type="month" id="data-inicio" name="data-inicio" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                </div>
                                <div>
                                    <label for="data-fim" class="block text-sm font-medium text-gray-700">Data de Término</label>
                                    <input type="month" id="data-fim" name="data-fim" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                    <div class="mt-1">
                                        <input type="checkbox" id="atual" name="atual" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                        <label for="atual" class="ml-2 text-sm text-gray-700">Emprego atual</label>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="descricao-exp" class="block text-sm font-medium text-gray-700">Descrição</label>
                                <textarea id="descricao-exp" name="descricao-exp" rows="3" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Descreva suas responsabilidades e conquistas..."></textarea>
                                <div class="mt-2 flex justify-between items-center">
                                    <button class="text-sm text-indigo-600 hover:text-indigo-800">
                                        <i class="fas fa-magic mr-1"></i> Sugerir melhorias
                                    </button>
                                    <span class="text-xs text-gray-500">Use verbos de ação e resultados quantificáveis</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="formacao" class="form-section bg-white rounded-lg shadow-sm p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-medium text-gray-900">Formação Acadêmica</h2>
                        <button class="text-sm text-indigo-600 hover:text-indigo-800">
                            <i class="fas fa-plus mr-1"></i> Adicionar
                        </button>
                    </div>
                    <div class="border border-gray-200 rounded-md p-4 mb-4">
                        <div class="grid grid-cols-1 gap-4">
                            <div>
                                <label for="curso" class="block text-sm font-medium text-gray-700">Curso</label>
                                <input type="text" id="curso" name="curso" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Ex: Ciência da Computação">
                            </div>
                            <div>
                                <label for="instituicao" class="block text-sm font-medium text-gray-700">Instituição</label>
                                <input type="text" id="instituicao" name="instituicao" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Ex: Universidade XYZ">
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label for="data-inicio-edu" class="block text-sm font-medium text-gray-700">Data de Início</label>
                                    <input type="month" id="data-inicio-edu" name="data-inicio-edu" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                </div>
                                <div>
                                    <label for="data-fim-edu" class="block text-sm font-medium text-gray-700">Data de Conclusão</label>
                                    <input type="month" id="data-fim-edu" name="data-fim-edu" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                    <div class="mt-1">
                                        <input type="checkbox" id="cursando" name="cursando" class="rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                                        <label for="cursando" class="ml-2 text-sm text-gray-700">Em andamento</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="habilidades" class="form-section bg-white rounded-lg shadow-sm p-6 mb-6">
                    <h2 class="text-xl font-medium text-gray-900 mb-4">Habilidades</h2>
                    <div>
                        <label for="habilidades-input" class="block text-sm font-medium text-gray-700">Adicione suas habilidades</label>
                        <div class="mt-1 flex">
                            <input type="text" id="habilidades-input" name="habilidades-input" class="block w-full border-gray-300 rounded-l-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Ex: JavaScript">
                            <button class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-r-md text-white bg-indigo-600 hover:bg-indigo-700">
                                Adicionar
                            </button>
                        </div>
                        <div class="mt-2 flex justify-between items-center">
                            <button class="text-sm text-indigo-600 hover:text-indigo-800">
                                <i class="fas fa-magic mr-1"></i> Sugerir habilidades
                            </button>
                            <span class="text-xs text-gray-500">Separe por vírgulas ou adicione uma a uma</span>
                        </div>
                        <div class="mt-4 flex flex-wrap gap-2">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800">
                                JavaScript <button class="ml-1 text-indigo-600 hover:text-indigo-800"><i class="fas fa-times"></i></button>
                            </span>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800">
                                HTML5 <button class="ml-1 text-indigo-600 hover:text-indigo-800"><i class="fas fa-times"></i></button>
                            </span>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800">
                                CSS3 <button class="ml-1 text-indigo-600 hover:text-indigo-800"><i class="fas fa-times"></i></button>
                            </span>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800">
                                React <button class="ml-1 text-indigo-600 hover:text-indigo-800"><i class="fas fa-times"></i></button>
                            </span>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800">
                                Node.js <button class="ml-1 text-indigo-600 hover:text-indigo-800"><i class="fas fa-times"></i></button>
                            </span>
                        </div>
                    </div>
                </div>

                <div id="idiomas" class="form-section bg-white rounded-lg shadow-sm p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-medium text-gray-900">Idiomas</h2>
                        <button class="text-sm text-indigo-600 hover:text-indigo-800">
                            <i class="fas fa-plus mr-1"></i> Adicionar
                        </button>
                    </div>
                    <div class="border border-gray-200 rounded-md p-4 mb-4">
                        <div class="grid grid-cols-1 gap-4">
                            <div>
                                <label for="idioma" class="block text-sm font-medium text-gray-700">Idioma</label>
                                <input type="text" id="idioma" name="idioma" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Ex: Inglês">
                            </div>
                            <div>
                                <label for="nivel" class="block text-sm font-medium text-gray-700">Nível</label>
                                <select id="nivel" name="nivel" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                                    <option value="">Selecione um nível</option>
                                    <option value="basico">Básico</option>
                                    <option value="intermediario">Intermediário</option>
                                    <option value="avancado">Avançado</option>
                                    <option value="fluente">Fluente</option>
                                    <option value="nativo">Nativo</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="cursos" class="form-section bg-white rounded-lg shadow-sm p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-medium text-gray-900">Cursos e Certificações</h2>
                        <button class="text-sm text-indigo-600 hover:text-indigo-800">
                            <i class="fas fa-plus mr-1"></i> Adicionar
                        </button>
                    </div>
                    <div class="border border-gray-200 rounded-md p-4 mb-4">
                        <div class="grid grid-cols-1 gap-4">
                            <div>
                                <label for="curso-cert" class="block text-sm font-medium text-gray-700">Curso/Certificação</label>
                                <input type="text" id="curso-cert" name="curso-cert" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Ex: AWS Certified Developer">
                            </div>
                            <div>
                                <label for="instituicao-cert" class="block text-sm font-medium text-gray-700">Instituição</label>
                                <input type="text" id="instituicao-cert" name="instituicao-cert" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Ex: Amazon Web Services">
                            </div>
                            <div>
                                <label for="data-cert" class="block text-sm font-medium text-gray-700">Data de Conclusão</label>
                                <input type="month" id="data-cert" name="data-cert" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Preview -->
            <div class="w-1/2 bg-gray-100 preview-container">
                <div class="p-6">
                    <div class="bg-white rounded-lg shadow-md p-8">
                        <div class="text-center mb-6">
                            <h1 id="preview-nome" class="text-3xl font-bold text-gray-900">João Silva</h1>
                            <p id="preview-cargo" class="text-xl text-indigo-600 mt-1">Desenvolvedor Full Stack</p>
                            <div class="flex justify-center items-center mt-3 text-gray-600 text-sm space-x-4">
                                <span><i class="fas fa-envelope mr-1"></i> <span id="preview-email">joao@email.com</span></span>
                                <span><i class="fas fa-phone mr-1"></i> <span id="preview-telefone">(11) 98765-4321</span></span>
                                <span><i class="fas fa-map-marker-alt mr-1"></i> <span id="preview-localizacao">São Paulo, SP</span></span>
                            </div>
                            <div class="mt-2 text-gray-600 text-sm">
                                <span><i class="fab fa-linkedin mr-1"></i> <span id="preview-linkedin">linkedin.com/in/joaosilva</span></span>
                            </div>
                        </div>

                        <div class="mb-6">
                            <h2 class="text-lg font-bold text-gray-900 border-b border-gray-200 pb-1 mb-3">Resumo Profissional</h2>
                            <p id="preview-resumo" class="text-gray-700">
                                Desenvolvedor Full Stack com mais de 5 anos de experiência em desenvolvimento web e aplicações móveis. Especializado em JavaScript, React, Node.js e tecnologias relacionadas. Apaixonado por criar soluções eficientes e escaláveis que resolvem problemas reais de negócios.
                            </p>
                        </div>

                        <div class="mb-6">
                            <h2 class="text-lg font-bold text-gray-900 border-b border-gray-200 pb-1 mb-3">Experiência Profissional</h2>
                            <div class="mb-4">
                                <div class="flex justify-between">
                                    <h3 class="font-bold text-gray-800">Desenvolvedor Front-end</h3>
                                    <span class="text-gray-600 text-sm">Jan 2020 - Atual</span>
                                </div>
                                <p class="text-indigo-600">Empresa XYZ</p>
                                <ul class="mt-2 text-gray-700 list-disc list-inside">
                                    <li>Desenvolvimento e manutenção de aplicações web utilizando React, Redux e TypeScript</li>
                                    <li>Implementação de design responsivo e otimização de performance</li>
                                    <li>Colaboração com equipe de UX/UI para melhorar a experiência do usuário</li>
                                </ul>
                            </div>
                        </div>

                        <div class="mb-6">
                            <h2 class="text-lg font-bold text-gray-900 border-b border-gray-200 pb-1 mb-3">Formação Acadêmica</h2>
                            <div class="mb-4">
                                <div class="flex justify-between">
                                    <h3 class="font-bold text-gray-800">Ciência da Computação</h3>
                                    <span class="text-gray-600 text-sm">2015 - 2019</span>
                                </div>
                                <p class="text-indigo-600">Universidade XYZ</p>
                            </div>
                        </div>

                        <div class="mb-6">
                            <h2 class="text-lg font-bold text-gray-900 border-b border-gray-200 pb-1 mb-3">Habilidades</h2>
                            <div class="flex flex-wrap gap-2">
                                <span class="px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm">JavaScript</span>
                                <span class="px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm">HTML5</span>
                                <span class="px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm">CSS3</span>
                                <span class="px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm">React</span>
                                <span class="px-3 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm">Node.js</span>
                            </div>
                        </div>

                        <div class="mb-6">
                            <h2 class="text-lg font-bold text-gray-900 border-b border-gray-200 pb-1 mb-3">Idiomas</h2>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <p class="font-medium text-gray-800">Português</p>
                                    <p class="text-gray-600 text-sm">Nativo</p>
                                </div>
                                <div>
                                    <p class="font-medium text-gray-800">Inglês</p>
                                    <p class="text-gray-600 text-sm">Avançado</p>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h2 class="text-lg font-bold text-gray-900 border-b border-gray-200 pb-1 mb-3">Cursos e Certificações</h2>
                            <div class="mb-2">
                                <div class="flex justify-between">
                                    <h3 class="font-medium text-gray-800">AWS Certified Developer</h3>
                                    <span class="text-gray-600 text-sm">2021</span>
                                </div>
                                <p class="text-indigo-600 text-sm">Amazon Web Services</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simulação de funcionalidade básica
        document.addEventListener('DOMContentLoaded', function() {
            // Tema claro/escuro
            const themeToggle = document.getElementById('theme-toggle');
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                const icon = themeToggle.querySelector('i');
                if (icon.classList.contains('fa-moon')) {
                    icon.classList.remove('fa-moon');
                    icon.classList.add('fa-sun');
                } else {
                    icon.classList.remove('fa-sun');
                    icon.classList.add('fa-moon');
                }
            });

            // Atualização em tempo real do preview
            const nome = document.getElementById('nome');
            const previewNome = document.getElementById('preview-nome');
            
            nome.addEventListener('input', function() {
                previewNome.textContent = nome.value || 'João Silva';
            });

            const cargo = document.getElementById('cargo');
            const previewCargo = document.getElementById('preview-cargo');
            
            cargo.addEventListener('input', function() {
                previewCargo.textContent = cargo.value || 'Desenvolvedor Full Stack';
            });

            // Verificação de imagens e fallbacks
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                if (!img.complete || img.naturalHeight === 0) {
                    // Se a imagem não carregou, o evento onerror será acionado
                    img.onerror();
                }
            });

            // Simulação de salvamento
            const saveBtn = document.getElementById('save-btn');
            saveBtn.addEventListener('click', function() {
                const notification = document.createElement('div');
                notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-md shadow-lg';
                notification.textContent = 'Currículo salvo com sucesso!';
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            });

            // Simulação de exportação PDF
            const exportBtn = document.getElementById('export-btn');
            exportBtn.addEventListener('click', function() {
                const notification = document.createElement('div');
                notification.className = 'fixed top-4 right-4 bg-indigo-500 text-white px-4 py-2 rounded-md shadow-lg';
                notification.textContent = 'Currículo exportado para PDF!';
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            });
        });
    </script>

    <!-- Modal Premium (carregado via HTMX) -->
    <div id="premium-modal"></div>

    <!-- Configurações HTMX -->
    <script>
        // Configurar HTMX para incluir customer_id em todas as requisições
        document.body.addEventListener('htmx:configRequest', function(evt) {
            const customerId = localStorage.getItem('customer_id') || 'guest_' + Date.now();
            localStorage.setItem('customer_id', customerId);
            
            // Adicionar customer_id aos parâmetros
            if (evt.detail.verb === 'get') {
                evt.detail.parameters.customer_id = customerId;
            } else {
                evt.detail.parameters.customer_id = customerId;
            }
        });

        // Tratar respostas de erro do HTMX
        document.body.addEventListener('htmx:responseError', function(evt) {
            if (evt.detail.xhr.status === 403) {
                // Template premium requer upgrade
                const response = JSON.parse(evt.detail.xhr.responseText);
                if (response.upgrade_required) {
                    showPremiumUpgradeModal(response);
                }
            } else if (evt.detail.xhr.status === 429) {
                // Rate limit
                showNotification('Muitas requisições. Aguarde um momento.', 'warning');
            } else {
                showNotification('Erro ao carregar conteúdo. Tente novamente.', 'error');
            }
        });

        // Tratar sucesso do HTMX
        document.body.addEventListener('htmx:afterSwap', function(evt) {
            if (evt.detail.target.id === 'template-preview') {
                // Mostrar preview do template
                evt.detail.target.classList.remove('hidden');
                
                // Scroll suave para o preview
                evt.detail.target.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'nearest' 
                });
            }
        });

        // Função para mostrar modal de upgrade premium
        function showPremiumUpgradeModal(data) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white rounded-lg p-6 max-w-md mx-4">
                    <div class="text-center">
                        <div class="mb-4">
                            <i class="fas fa-lock text-yellow-500 text-4xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-2">
                            Template Premium
                        </h3>
                        <p class="text-gray-600 mb-6">
                            Este template requer assinatura Premium para ser usado.
                        </p>
                        <div class="space-y-3">
                            <button onclick="window.location.href='/premium.html'" 
                                    class="w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700">
                                Ver Planos Premium
                            </button>
                            <button onclick="this.closest('.fixed').remove()" 
                                    class="w-full text-gray-500 py-2 hover:text-gray-700">
                                Continuar com plano gratuito
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Função para mostrar notificações
        function showNotification(message, type = 'info') {
            const colors = {
                'info': 'bg-blue-500',
                'success': 'bg-green-500',
                'warning': 'bg-yellow-500',
                'error': 'bg-red-500'
            };
            
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 ${colors[type]} text-white px-4 py-2 rounded-md shadow-lg z-50`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // Carregar templates disponíveis na inicialização
        document.addEventListener('DOMContentLoaded', function() {
            // Fazer requisição inicial para verificar templates disponíveis
            htmx.ajax('GET', '/api/templates', {
                target: '#templates-container',
                swap: 'innerHTML'
            }).catch(function() {
                console.log('Usando templates estáticos como fallback');
            });
        });
    </script>
</body>
</html>
